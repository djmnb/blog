---
title: 8086汇编学习
date: 2023-9-15
tags:
  - 汇编
---

# 前言

在考研过程中好好学了一下计算机组成原理,  让我对底层这些东西产生了浓厚的兴趣,  因此就先学学基础汇编



# 基本信息

* 机器字长为 16位    存储字长为16位    地址线20根   数据线16根
* 由于机器字长只有16位,  地址线有20根,  计算物理地址需要特别处理  物理地址 =  段地址*16 + 段内地址    (物理地址表示不唯一)
* AX,BX,CX,DX  都是通用寄存器, 用来存放数据  段地址寄存器有: CS  DS ES SS  偏移地址寄存器有:  SP,BP,SI,DI,IP,BX
* CS:IP  指定下一条执行指令的位置,   SS:SP 指定栈顶位置 (进栈操作 SP-字节数  放入数据, 出栈操作 拿出数据 SP+数据字节数)  DS , ES是数据段位置  
* 数据在内存中都是小端存放



# 寄存器

下面是8086 CPU的主要寄存器及其英文全称和功能：

1. **AX (Accumulator Register)**：累加寄存器。
   - 主要用于算数运算和数据传输。
  
2. **BX (Base Register)**：基址寄存器。
   - 除了可以用于算术运算外，它还经常用于地址运算。

3. **CX (Count Register)**：计数寄存器。
   - 通常用于循环计数。
   
4. **DX (Data Register)**：数据寄存器。
   - 用于算数运算和某些特殊指令，如某些I/O操作。

5. **SI (Source Index)**：源索引寄存器。
   - 主要用于字符串操作，表示源字符串的地址。

6. **DI (Destination Index)**：目标索引寄存器。
   - 主要用于字符串操作，表示目标字符串的地址。

7. **BP (Base Pointer)**：基指针寄存器。
   - 通常用于基于堆栈的参数和局部变量的地址引用。

8. **SP (Stack Pointer)**：堆栈指针寄存器。
   - 始终指向堆栈的顶部，随着数据的压入和弹出而变化。

此外，8086还有段寄存器，用于段地址运算：

1. **CS (Code Segment)**：代码段寄存器。
   - 指向当前执行代码的段。

2. **DS (Data Segment)**：数据段寄存器。
   - 用于大多数数据操作指令的默认段。

3. **SS (Stack Segment)**：堆栈段寄存器。
   - 指向堆栈的段。

4. **ES (Extra Segment)**：附加段寄存器。
   - 为某些字符串操作提供一个附加的段选择。

8086还有一个特殊的寄存器：

1. **IP (Instruction Pointer)**：指令指针。
   - 与CS寄存器一起，CS:IP总是指向下一条要执行的指令。

以上列举的是8086微处理器的主要寄存器。这些寄存器为低级编程提供了大量的灵活性和功能。

# Debug的使用

通过debug 能够查看寄存器的内容, 以及内存的内容, 并且指令执行跟踪

1. **A [address]**: Assemble
   - 用于在指定地址开始手动汇编代码。
   - 当你输入`A`然后按Enter，你可以开始输入汇编指令。
   - 使用空行结束汇编。
2. **D [range]**: Dump
   - 用于显示内存中的内容。
   - `D`后面可以跟一个地址范围，如`D 100 150`，表示显示从100到150的内存内容。
3. **E address [list]**: Enter
   - 用于修改指定地址的内存内容。
   - 例如，`E 100 90 91 92`会将地址100、101、102的内存值分别设为90、91、92。
   - 询问式更改 :  E 地址 空格继续,回车结束
4. **G [=address] [breakpoints]**: Go
   - 执行程序直到遇到指定的断点。
   - `G=100`表示从地址100开始执行。
5. **I port**: Input
   - 从指定的I/O端口读取值。
   - 例如，`I 60`会读取端口60的值。
6. **L range address**: Load
   - 从磁盘上的文件加载数据到指定地址的内存。
7. **N [filename]**: Name
   - 指定一个文件名，用于后续的读/写操作。
8. **R [register]**: Register
   - 查看或修改CPU寄存器的值。
   - 输入`R`会显示所有寄存器的值。`R AX`会显示AX寄存器的值，并允许你修改它。
9. **T [=address] [count]**: Trace
   - 单步执行指令。
   - `T=100 5`表示从地址100开始执行，并执行5条指令。
10. **U [range]**: Unassemble
    * 将指定内存地址的机器代码反汇编为汇编语言。
    * `U 100 150`表示将从100到150的地址反汇编。
11. **Q**: Quit
    * 退出DEBUG。

# 指令

* loop   相当于c语言的do while   执行的时候  先将cx的值减一,  然后判断是否为0
* inc  自增运算